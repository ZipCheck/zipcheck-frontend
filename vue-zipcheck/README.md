# 📌 프론트엔드 수정 요청 스크립트 (댓글 삭제 버튼 문제)

본 문서는 **ZipCheck 댓글 백엔드 구조를 기준으로**,
프론트엔드 UI/UX 생성 AI(Figma, Stitch AI, 웹 디자인 생성 AI 등)에 **그대로 전달하여 사용 가능한 요청 스크립트**입니다.

---

## 🔍 현재 상황 요약

* 댓글은 **로그인한 사용자가 직접 작성한 댓글**임
* 백엔드에서는 `userId` 기준으로 **댓글 삭제 권한 검증이 정상 동작**함
* 그러나 프론트엔드에서 **댓글 삭제 버튼이 보이지 않거나 클릭이 불가능함**

---

## ❗ 문제의 핵심 원인

프론트엔드에서 **댓글 작성자 여부 판단 기준이 올바르지 않음**

* 댓글 목록 API 응답(`CommentResponse`)에는 `userId` 필드가 포함되어 있지 않음
* 백엔드에서 내려주는 댓글 작성자 관련 정보:

  * `nickname`
  * `profileImageUrl`
  * `createdAt`
* 따라서 프론트엔드에서 다음과 같은 비교를 수행할 경우 문제 발생:

```js
comment.userId === loginUserId // ❌ 항상 false
```

---

## ✅ 프론트엔드 수정 요구 사항

### 1️⃣ 로그인 유저 정보 관리 기준

* 로그인 유저 정보는 JWT 디코딩 또는 전역 상태(store)에서 관리
* 최소 필요 정보 구조 예시:

```js
loginUser = {
  userId,
  nickname
}
```

---

### 2️⃣ 댓글 삭제 버튼 노출 조건 (핵심)

> **댓글 작성자 닉네임과 로그인 유저 닉네임이 일치할 경우에만 삭제 버튼 노출**

```text
comment.nickname === loginUser.nickname
```

* `userId` 비교 방식 ❌
* `nickname` 비교 방식 ⭕

---

### 3️⃣ UI 동작 요구 사항

* 각 댓글 우측에 **삭제 아이콘(🗑️ 또는 X)** 배치

* 다음 조건을 모두 만족할 경우에만 버튼 노출:

  * 로그인 상태일 것
  * 댓글 작성자일 것

* 타인의 댓글일 경우:

  * 삭제 버튼 미노출
  * 또는 disabled 상태 처리

---

### 4️⃣ 삭제 버튼 클릭 시 API 연동 규칙

#### 🔹 댓글 삭제 API

```http
DELETE /comments/{commentId}
```

* Access Token은 Authorization Header에 포함
* 요청 바디 없음
* `userId`를 별도로 전달하지 않음

  * (백엔드에서 인증 객체로 자동 판별)

---

## 🧩 댓글 목록 API 응답 예시

```json
{
  "commentId": 10,
  "content": "댓글 내용입니다",
  "nickname": "작성자닉네임",
  "profileImageUrl": "https://...",
  "createdAt": "2024-12-20 14:30"
}
```

---

## 🎯 최종 목표

* 내가 작성한 댓글에는 **반드시 삭제 버튼이 노출**되어야 함
* 권한 판단은 **닉네임 비교 기준**으로 처리
* **백엔드 로직 변경 없이 프론트엔드 로직만 수정**

---

## ➕ 추가 UI 요청 사항 (선택)

* 삭제 버튼 클릭 시 confirm 모달 표시
* 삭제 성공 시 댓글 리스트 즉시 갱신 (프론트 상태 갱신)
* 모바일 환경에서도 터치 가능한 버튼 크기 고려

---

본 스크립트는 **프론트엔드 UI 생성 AI에 그대로 전달하여 사용 가능**합니다.
