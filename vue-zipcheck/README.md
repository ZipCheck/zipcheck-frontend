# í”„ë¡ íŠ¸ì—”ë“œ ìˆ˜ì • ìš”ì²­ ìŠ¤í¬ë¦½íŠ¸ â€“ ì°œ ìƒíƒœ í‘œì‹œ ë° í† ê¸€ ë²„ê·¸ ìˆ˜ì •

## 1. í˜„ì¬ ë°œìƒ ì¤‘ì¸ ë¬¸ì œ ìš”ì•½

* ì„œë²„ DBì—ëŠ” ì´ë¯¸ ì°œ(interest) ë°ì´í„°ê°€ ì¡´ì¬í•¨
* `/api/listings` ì‘ë‹µì—ëŠ” `isFavorite: true` ê°€ ì •ìƒì ìœ¼ë¡œ ë‚´ë ¤ì˜¤ê³  ìˆìŒ
* í•˜ì§€ë§Œ í”„ë¡ íŠ¸ í™”ë©´ì—ì„œëŠ” í•˜íŠ¸ê°€ ë¹„ì–´ ìˆëŠ” ìƒíƒœë¡œ í‘œì‹œë¨
* í•˜íŠ¸ í´ë¦­ ì‹œ í•­ìƒ `POST /api/interests/{dealNo}` ê°€ í˜¸ì¶œë˜ì–´
  ì„œë²„ì—ì„œ **"ì´ë¯¸ ë“±ë¡ëœ ê´€ì‹¬ ë§¤ë¬¼ì…ë‹ˆë‹¤" ì˜ˆì™¸ê°€ ë°œìƒ**í•¨

ğŸ‘‰ ì´ëŠ” **í”„ë¡ íŠ¸ì—ì„œ `isFavorite` ê°’ì„ ë Œë”ë§/í† ê¸€ ë¡œì§ì— ë°˜ì˜í•˜ì§€ ì•Šê³  ìˆê¸° ë•Œë¬¸**ì„

---

## 2. ë°±ì—”ë“œ API ê³„ì•½ (í™•ì • ì‚¬í•­)

### 2.1 ë§¤ë¬¼ ëª©ë¡ ì¡°íšŒ

```
GET /api/listings
Authorization: Bearer {accessToken}
```

ì‘ë‹µ êµ¬ì¡°:

```json
{
  "success": true,
  "data": [
    {
      "dealNo": 123,
      "aptName": "ë””íŒ°ë¦¬ìŠ¤",
      "dealAmount": "28ì–µ",
      "isFavorite": true
    }
  ]
}
```

* `isFavorite` ëŠ” **DB ê¸°ì¤€ì˜ ì°œ ìƒíƒœ**
* í”„ë¡ íŠ¸ëŠ” ì´ ê°’ì„ **ì ˆëŒ€ ì´ˆê¸°ê°’ìœ¼ë¡œ ë®ì–´ì“°ë©´ ì•ˆ ë¨**

---

### 2.2 ì°œ í† ê¸€ API

* ì°œ ë“±ë¡

```
POST /api/interests/{dealNo}
```

* ì°œ ì·¨ì†Œ

```
DELETE /api/interests/{dealNo}
```

---

## 3. í”„ë¡ íŠ¸ì—ì„œ ë°˜ë“œì‹œ ìˆ˜ì •í•´ì•¼ í•  ì‚¬í•­

### 3.1 API ì‘ë‹µ ë§¤í•‘ (ì¤‘ìš”)

âŒ ì˜ëª»ëœ ì½”ë“œ

```js
items.value = response.data;
```

âœ… ì˜¬ë°”ë¥¸ ì½”ë“œ

```js
items.value = response.data.data;
```

> ì´ ì‹¤ìˆ˜ë¡œ ì¸í•´ `isFavorite`ê°€ í•­ìƒ `undefined â†’ false` ì²˜ë¦¬ë˜ê³  ìˆìŒ

---

### 3.2 í•˜íŠ¸ ì•„ì´ì½˜ ìƒíƒœ ë°”ì¸ë”©

âŒ ì˜ëª»ëœ ë°©ì‹

```vue
<HeartIcon :active="false" />
```

âœ… ë°˜ë“œì‹œ ì•„ë˜ì²˜ëŸ¼ êµ¬í˜„

```vue
<HeartIcon :active="item.isFavorite" />
```

---

### 3.3 ì°œ í† ê¸€ ë¡œì§ (ì ˆëŒ€ ì¤‘ìš”)

âŒ í˜„ì¬ ë¬¸ì œ ë¡œì§ (ë¬´ì¡°ê±´ POST í˜¸ì¶œ)

```js
await api.post(`/api/interests/${dealNo}`);
```

âœ… ë°˜ë“œì‹œ ìƒíƒœ ê¸°ë°˜ ë¶„ê¸° ì²˜ë¦¬

```js
async function toggleFavorite(item) {
  if (item.isFavorite) {
    await api.delete(`/api/interests/${item.dealNo}`);
    item.isFavorite = false;
  } else {
    await api.post(`/api/interests/${item.dealNo}`);
    item.isFavorite = true;
  }
}
```

---

### 3.4 ì¹´ë“œ í´ë¦­ ì´ë²¤íŠ¸ì™€ ë¶„ë¦¬

* í•˜íŠ¸ í´ë¦­ ì‹œ ì¹´ë“œ ìƒì„¸ í˜ì´ì§€ë¡œ ì´ë™í•˜ë©´ ì•ˆ ë¨

```vue
<button @click.stop="toggleFavorite(item)">
  <HeartIcon :active="item.isFavorite" />
</button>
```

---

## 4. ë””ë²„ê¹… í•„ìˆ˜ í™•ì¸ ì½”ë“œ

êµ¬í˜„ í›„ ë°˜ë“œì‹œ ì½˜ì†”ì—ì„œ ì•„ë˜ ê°’ í™•ì¸:

```js
console.log(item.dealNo, item.isFavorite);
```

* ì°œí•œ ë§¤ë¬¼ â†’ `true`
* ì°œ ì•ˆ í•œ ë§¤ë¬¼ â†’ `false`

---

## 5. ì •ìƒ ë™ì‘ ê¸°ì¤€ (ì²´í¬ë¦¬ìŠ¤íŠ¸)

* [ ] ì´ë¯¸ ì°œí•œ ë§¤ë¬¼ì€ ì²˜ìŒë¶€í„° í•˜íŠ¸ê°€ ì±„ì›Œì ¸ ìˆìŒ
* [ ] í•˜íŠ¸ í´ë¦­ ì‹œ ì°œ/ì·¨ì†Œê°€ ì •ìƒì ìœ¼ë¡œ í† ê¸€ë¨
* [ ] ì°œ ì·¨ì†Œ ì‹œ `DELETE` í˜¸ì¶œë¨
* [ ] ì¤‘ë³µ POST ìš”ì²­ ë°œìƒí•˜ì§€ ì•ŠìŒ
* [ ] ì„œë²„ì— "ì´ë¯¸ ë“±ë¡ëœ ê´€ì‹¬ ë§¤ë¬¼ì…ë‹ˆë‹¤" ì—ëŸ¬ê°€ ë” ì´ìƒ ë°œìƒí•˜ì§€ ì•ŠìŒ

---

## 6. í•œ ì¤„ ìš”ì•½ (í”„ë¡ íŠ¸ AIìš©)

> `/api/listings` ì‘ë‹µì˜ `isFavorite` ê°’ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•´ í•˜íŠ¸ ìƒíƒœë¥¼ ë Œë”ë§í•˜ê³ ,
> í•˜íŠ¸ í´ë¦­ ì‹œ `isFavorite` ê¸°ì¤€ìœ¼ë¡œ POST/DELETEë¥¼ ë¶„ê¸° ì²˜ë¦¬í•´ì•¼ í•œë‹¤.
